document.addEventListener("DOMContentLoaded",()=>{const o="/api/select_salas",n="/api/delete_sala_id";let e=null;function c(){fetch(o).then(a=>a.json()).then(a=>{let l=document.querySelector("#movie");l.innerHTML='<option value="" disabled selected>Elige una película</option>',a.salas.forEach(s=>{const r=document.createElement("option");r.value=s.id,r.textContent=s.pelicula,l.appendChild(r)})}).catch(a=>{console.error("Error al cargar las películas:",a),t("Error al cargar las películas.","error")})}function i(a){e=a.target.value}function u(){if(!e){t("No se ha seleccionado ninguna película, por favor selecciona una.","error");return}confirm(`¿Estás seguro de que deseas eliminar la película con ID: ${e}?`)&&fetch(n+"/"+e).then(l=>l.json()).then(l=>{l.message?(t("Se ha eliminado la película correctamente","success"),c()):t("Hubo un error al eliminar la película.","error")}).catch(l=>{console.error("Error al eliminar la película:",l),t("Hubo un error al eliminar la película.","error")})}c(),document.getElementById("movie").addEventListener("change",i),document.getElementById("formulario-eliminar").addEventListener("submit",a=>{a.preventDefault(),u()})});function t(o,n){const e=document.createElement("div");e.classList.add("fixed","bottom-5","left-1/2","transform","-translate-x-1/2","px-6","py-3","rounded-lg","text-white","shadow-lg","w-72","text-center"),n==="success"?e.classList.add("bg-green-500"):n==="error"?e.classList.add("bg-red-500"):e.classList.add("bg-gray-500"),e.textContent=o,document.body.appendChild(e),setTimeout(()=>{e.remove()},3e3)}
